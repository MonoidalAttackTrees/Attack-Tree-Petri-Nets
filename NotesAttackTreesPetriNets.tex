\section{Attack Trees} 
Attack trees were first described by \cite{Schneier1999}, and have become a widely-used tool for modeling both attacker behavior and system vulnerabilities \cite{Pudar:2009:PPM:2639527.2639705}. Attack trees are constructed by placing the ultimate goal, compromise of the resource, at the root, and then dividing it into smaller and smaller sub-goals, which populate the branches and leaves of the tree. In this way, each path up the tree becomes a possible way to achieve the ultimate goal. The tree nodes are joined with logical connectives such as conjunction and disjunction. In the case of conjunction (AND), both children must be accomplished in order for the parent to be accomplished. In the case of disjunction (OR), at least one of the children must be accomplished for the attack to progress to the parent. Attack trees also make use of sequential connectives, which lay out the steps to a goal in a defined order.  
\par Attack trees are useful because they encourage the defender to think like an attacker. They focus attention on the vulnerabilities, and force defenders to analyze the possible exploitations of these vulnerabilities and the precise steps one would need to take to achieve the goal of compromising the target resource. Furthermore, attack trees provide an excellent resource for collaboration and brainstorming over potential attacks, enabling professionals with varying areas of expertise to work together. However, attack trees have significant limitations as well. Although \cite{Schneier1999} saw them as reusable in similar scenarios, in practice reuse has not been easy. Attack trees are labeled with specific steps to achieve a particular goal in a given scenario; with that level of concreteness, it is difficult to adapt one attack tree for multiple situations. In a similar vein, their specificity makes attack tree construction laborious and time-consuming, and the same goes for attack tree analysis. Furthermore, as purely graphical models, it is difficult to determine properties of attack trees such as equivalence or hierarchy without significant effort \cite{1652085}. Also, as static models attack trees do not capture the effect of timing on vulnerabilities \cite{Pudar:2009:PPM:2639527.2639705}, and also do not permit simulation testing.  
\section{Petri-Nets}
Attack trees are a valuable but limited resource for cybersecurity analysis. To address their limitations while retaining their strengths, researchers have established a correspondence between attack trees and Petri nets, which are graphical and mathematical process models. With the addition of mathematical modeling, Petri nets gain significant power both in representation and in analysis. Petri nets are powerful models for processes in many different areas, because they can capture key elements of processes and facilitate reasoning about them. Petri nets help to visualize the dynamics of a system, and support that visualization with mathematical definitions, analysis, and proof. There are many varieties of Petri nets to support many different uses, but the basic Petri net is a structure composed of places and transitions, with arcs between them that capture possible flows or paths through the net. McDermott  \cite{McDermott:2001:ANP:366173.366183} was the first to explore the correspondence between attack trees and Petri nets, modeling the states of the system as places, and actions or events that cause a change in state as transitions. He describes the attack net approach as contributing several strengths to penetration testing: modeling concurrency and the current state of an attack with tokens, showing intermediate goals more clearly as places, and showing the cumulative effects of different avenues of attack on the whole system. 
\par While there is widespread agreement that attack trees can be usefully reformulated as Petri nets, there is little consensus about how this process should be done. \todoBA{substantiate this claim with citations} Without a standard conversion algorithm, the representation of attack trees as Petri nets will fall victim to many of the same weaknesses already applying to attack trees, especially regarding the labor required and the potential for human error. To help address this, we have developed a type of Petri net that can be built in manageable pieces and then chained together to form ever-larger structures, until the entire attack tree is represented. Aside from the chainability of this new kind of Petri net, we have also developed connectives that capture the AND and OR often used in attack trees, as well as other connectives that will likely be useful in capturing the interaction of sub-goals to achieve a larger goal. Let us begin by formally defining a Petri net. 
\begin{definition}
  \label{def:Original-Petri-Net}
A \textbf{Petri net}, $(P, T, F)$, consists of the following structure:  
  \begin{itemize}
  \item A finite set of places $P$,
  \item A finite set of transitions $T$ that is disjoint from $P$,
  \item A causal dependency relation $F: (P \times T) + (T \times P) \to \mathbb{N}^+ $, 
  \end{itemize}
\end{definition}
The places track progress through the net by means of markers called tokens, while the transitions enable progress to be made. If a transition has two input places, both inputs must be active (contain tokens) in order for the transition to fire. Similarly, if a transition has two output places, both places will become active once the transition has fired. The transitions consume tokens from their input places and produce tokens in their output places each time their input conditions are satisfied. The input/output relation is captured in $F$, the causal dependency or flow relation. 
\section{Petri Nets as Monoids}
As established in \cite{MESEGUER1990105}, Petri nets are monoids. Monoids are structures with objects and an associative binary relation with an identity element. In the case of Petri nets, they are monoids in a twofold way because they are composed of two kinds of things - places and transitions. Multiset union forms a monoid over the places of a Petri net, while composition forms a monoid over the transitions, with the empty set as the identity element for both. Viewing Petri nets through this lens allowed us to reason about them more abstractly, and to build complex nets out of simple building blocks using connectives we define. 
The fact that the places and transitions of a Petri net form free commutative monoids is crucial to our development of these connectives, because it gives us a way to gather these elements together and sort them out again. From there, we can define morphisms to structure the connections between two nets without altering them. The free commutative monoid is built upon the notion of a finite multiset, as the definitions below make clear. 
\begin{definition}
  \label{def:Finite-Multiset}
  A \textbf{finite multiset} over a set $S$ can be defined as a formal
  sum denoted by $n_1a_1 \oplus \cdots \oplus n_ia_i$, where $n_1,
  \ldots, n_i \in \mathbb{N}$, $a_1, \ldots, a_i \in S$, and $na$
  denotes that $a$ occurs $n$ times in the multiset, such that the
  following properties hold:
  \begin{itemize}    
  \item $na_i \oplus ma_j = ma_j \oplus na_i$,
  \item $na \oplus ma = (m+n)a$,
  \item $na \oplus 0 = na = 0 \oplus na$.
  \end{itemize}
\end{definition}
%
\begin{definition}
  \label{def:Free-Commutative-Monoid}  
  The \textbf{free commutative monoid} generated by the set $A$ is the
  set of all finite multisets drawn from $A$, where the monoidal
  operation is the formal sum of multisets, and the monoidal unit is
  $\emptyset$.
\end{definition}
Petri nets are monoids, so their morphisms can be specified by defining a monoid homomorphism.
\begin{definition}
  \label{Monoid-Homomorphism}
  A \textbf{monoid homomorphism} between two monoids $(M_1, \oplus_1, 0_1)$ and $(M_2, \oplus_2, 0_2)$
  is a function $f: M_1 \to M_2$ such that:
  \begin{itemize}
  \item $f(a_1 \oplus_1 a_2) = f(a_1) \oplus f(a_2)$
  \item $f (0_1) = 0_2$
  \end{itemize}
\end{definition}
%
\section{Petri Nets as Graphs}
Petri nets fit more generally into the category of graphs, in that Petri net places correspond to nodes and the transitions correspond to edges or paths between nodes. Viewing Petri nets this way helps us in our understanding of the Petri net category. Let us begin to show this correspondence by first defining the category of graphs. 
\begin{definition}
  \label{def:Graph}
  A \textbf{generalized graph}, $(V, T, \mathsf{src}, \mathsf{tar}, \_^*,I,\otimes)$, consists of the following structure:
  \begin{itemize}
  \item A set of nodes $V$,
  \item A set of edges $T$,
  \item A functor $\_^* : \mathsf{Set} \to \mathsf{Set}$, where
    $(V^*,I,\otimes)$ is a monoid,
  \item A source function $\mathsf{src} : T \to V^*$,
  \item A target function $\mathsf{tar} : T \to V^*$.
  \end{itemize}
\end{definition}
% 
Taking the graphs as objects, we can define morphisms between them to complete the definition of the category of graphs. \todoBA{is this shifting up a level from the previous definition of graph?} 
\begin{definition}
  \label{def:Graph-Morphism}
  A \textbf{graph morphism}, $h : G \to G'$, between graphs is a pair $(f, g)$ where:
  \begin{itemize}
  \item $f: T \to T'$ is a function,
  \item $g: V \to V'$ is a function.
  \end{itemize}
\end{definition}
Thus, bringing in the definition of graph and monoid homomorphisms, we can define a Petri net morphism.
\begin{definition}
  \label{Petri-net-morphism}
  A \textbf{generalized graph morphism} between two generalized graphs\\
  $(V_1, T_1, \mathsf{src_1}, \mathsf{tar_1}, \_^{*_1},I_1,\otimes_1)$ and
  $(V_2, T_2, \mathsf{src_2}, \mathsf{tar_2}, \_^{*_2},I_2,\otimes_2)$ is a graph morphism
  $(f, g)$ where $f : T_1 \to T_2$ is a function and
  $g: V_1^{*_1} \to V_2^{*_2}$ is a monoid homomorphism.
\end{definition}
Now we have a complete categorical definition of Petri nets.
%
\begin{definition}
  \label{def:Petri-Net}
  A \textbf{Petri net}, $(S, T, \mathsf{src},
  \mathsf{tar},\_^{\oplus},\emptyset,\oplus)$, is a generalized graph.  We call
  the elements of the set $S$ places and the elements of $T$
  transitions.  Furthermore, we call the generalized graph
  homomorphisms between Petri nets \textbf{Petri net homomorphisms}.
\end{definition}
We will denote a Petri net $(S, T, \mathsf{src},
\mathsf{tar},\_^{\oplus},\emptyset,\oplus)$ by the pair $(S^\oplus,T)$ for
readability. Also, for $t \in T$ such that $\mathsf{src(t)} = s_A$ and $\mathsf{tar(t)} = s_B$, we will use the notation $t : s_A \rightarrow s_B$ for clarity and conciseness. 

Thus, take as objects Petri nets $(S^\oplus, T)$ and as morphisms Petri net morphisms. This defines a category Petri.

\section{Isomorphism of FCM's Product and Coproduct} 
In order to define the connectives for Petri nets categorically, we need to first establish that the product and the coproduct of free commutative monoids are isomorphic. This will enable us to gather the elements of the net together in equivalent ways so that our connectives add to the structure or flow of the net as it already exists, non-destructively. 
\begin{lemma}
Suppose we have two Petri nets, $(S_1^\oplus, T_1)$ and $(S_2^\oplus, T_2)$.\\ 
\[(S_1 ^\oplus \times S_2 ^\oplus) \cong (S_1 + S_2)^\oplus\]
\begin{proof}
To show this, we need to define two homomorphisms between them, which we will call F and G.\\
\bigskip\\
It is important to note that the $\oplus$ operation is commutative. This commutativity allows the elements of the resulting free commutative monoid (FCM) to be rearranged, which will help us in our proof by allowing FCMs to be sorted in the following way:\bigskip\\
Consider an arbitrary $s \in (S_1 + S_2)^\oplus$. Since the generator is the disjoint union of $S_1$ and $S_2$, the elements of $s$ are drawn from those two sets, but are not grouped according to their origin set. Using commutativity, we can move all $y_i \in S_1$ to the front, and all $z_j \in S_2$ to the end. Then the form of $s$ is $(\oplus_i y_i) \oplus (\oplus_j z_j)$, where the elements are grouped according to their origin set. Any element of $(S_1 + S_2)^\oplus$ can be similarly sorted. For the purposes of this proof, assume that all such elements are so sorted.\bigskip \\
Now, let us define the function $F: (S_1 + S_2)^\oplus \to (S_1 ^\oplus \times S_2 ^\oplus)$.\\
Let k be an arbitrary element of $(S_1 + S_2)^\oplus$. We know that $k \in (S_1 + S_2)^\oplus$ must have the form $(\oplus_i y_i) \oplus (\oplus_j z_j)$, where $y_i \in S_1$ and $z_i \in S_2$ as described above. Furthermore, since the + operator is disjoint union, each element includes a marker indicating its origin set, which we can use to locate the boundary between elements of $S_1$ and elements of $S_2$. Therefore we can define F as follows:\\
\[F((\oplus_i y_i \in S_1) \oplus (\oplus_j z_j \in S_2)) = ((\oplus_i y_i \in S_1), (\oplus_j z_j \in S_2))\]
\[F((S_1, \oplus) \oplus (S_2, \oplus)) = ((S_1, \oplus), (S_2, \oplus))\]
This allows an element of $(S_1 + S_2)^\oplus$ to be matched with an element of $(S_1 ^\oplus \times S_2 ^\oplus)$, since the generator of $(S_1 + S_2)^\oplus$ contains the generator for both $S_1^\oplus$ and $S_2^\oplus$.\bigskip\\ 
Another important feature of FCMs arises from lifting the coproducts of sets to FCMs. For the coproduct of sets, we know that there exist the following functions:\\
\[inj_1: S_1 \to (S_1 + S_2) \]
\[inj_2: S_2 \to (S_1 + S_2)\]
Likewise, for the coproduct of FCMs, there are the functions: \\
\[inj^\oplus_1: S_1^\oplus \to (S_1 + S_2)^\oplus  \]
\[inj^\oplus_1(\oplus_i n_i x_i) = \oplus_i n_i(inj_1 x_i)\]
\smallskip
\[inj^\oplus_2: S_2^\oplus \to (S_1 + S_2)^\oplus \]
\[ inj^\oplus_2(\oplus_i n_i x_i) = \oplus_i n_i(inj_2 x_i)\]
Using this property, let us now define $G: (S_1 ^\oplus \times S_2 ^\oplus) \to (S_1 + S_2)^\oplus$.\\
Let $k$ be an arbitrary element of $(S_1 ^\oplus \times S_2 ^\oplus)$. We know $k$ must have the form $(M_1 , M_2)$ where $M_i$ is a multiset of the form $(n_1z_1 \oplus ... \oplus n_bz_b)$, and all $z \in S_i$ for $i\in\{1, 2\}$ (all n being natural number counters for the multiset).\\
Therefore we define the function G as follows:\\
\begin{center}
  \begin{math}
    \begin{array}{lll}
       G(M_1, M_2) & = & (inj_1^\oplus M_1) \oplus (inj_2^\oplus M_2)
    \end{array}
  \end{math}
\end{center}
By this transformation, we can match an element of $(S_1 ^\oplus \times S_2 ^\oplus)$ with an element of $(S_1 + S_2)^\oplus$, since by the nature of coproducts, any s $\in S_1^\oplus \in (S_1+S_2)^\oplus$, and similarly any s $\in S_2^\oplus \in (S_1+S_2)^\oplus$.\bigskip \\

Now that we have defined a homomorphism in both directions, we must
prove that $F;G = Id$ and $G;F = Id$. Take an arbitrary multiset $M$
of the form $(n_1z_1 \oplus ... \oplus n_bz_b)$, with some elements
drawn from a set $S_a$ and some drawn from $S_b$ and each $n_i \in
\mathbb{N}$. Sorting this multiset will yield the form $(\oplus_a n_a
y_a) \oplus (\oplus_b n_b z_b)$, where $y_a \in S_a$ and $z_b \in
S_b$. Putting this into the functions, we get:
\begin{center}
  \begin{math}
    \begin{array}{lll}
      G(F((\oplus_a n_a y_a) \oplus (\oplus_b n_b z_b)))
      & = & G((\oplus_a n_a y_a), (\oplus_b n_b z_b))\\
      & = & (\oplus_a n_a y_a) \oplus (\oplus_b n_b z_b)\\
    \end{array}
  \end{math}
\end{center}
Thus, $F;G = Id$.\\

Now let us check for identity in the opposite direction, proving G;F = Id.\\
Take arbitrary sets $S_a$ and $S_b$. Generate the FCM of each and then their product: $(S_a^\oplus \times S_b^\oplus)$. The result will have the form $((\oplus_a n_a y_a), (\oplus_b n_b z_b))$, where $y_a \in S_a$ and $z_b \in S_b$. Putting this into the functions, we get:\\
\begin{center}
  \begin{math}
    \begin{array}{lll}
     G((\oplus_a n_a y_a), (\oplus_b n_b z_b)) & = & ((\oplus_a n_a y_a) \oplus (\oplus_b n_b z_b)) \\
     F((\oplus_a n_a y_a) \oplus (\oplus_b n_b z_b)) & = & ((\oplus_a n_a y_a), (\oplus_b n_b z_b))\\
    \end{array}
  \end{math}
\end{center}
 
Thus, G;F = Id. 
Since $(S_1 ^\oplus \times S_2 ^\oplus) \leftrightarrow (S_1 + S_2)^\oplus$, we can conclude that $(S_1 ^\oplus \times S_2 ^\oplus) \cong (S_1 + S_2)^\oplus$.\\
\end{proof}
%
\end{lemma}
%
\section{Representing Attack Trees as Petri Nets}
\section{Chainable Petri Nets}
So far, we have explored the category of Petri nets, its monoidal characteristics, and its relation to the category of graphs. In our exploration of the category of Petri nets, we have exposed key characteristics of the free commutative monoid over the places and transitions. The isomorphism between the product and coproduct of the free commutative monoid gives us the ability to connect Petri nets using these operations. This is crucial to our efforts to translate attack trees into Petri nets because it defines an important part of how Petri nets can be combined. However, in order to focus on the connectives, we first need to make sure that the pieces we are joining together will not be changed internally by the connection. This ensures that whatever patterns already built into a net will not be altered by making that net part of a larger net. By isolating each part this way, we make it possible to build a complex net out of simple parts. We achieve this isolation by distinguishing two transitions and two places for each Petri net. These elements mark the start and end of the net, so that one net can be joined to another like so many garden hoses or extension cords. This net pattern has also been used in process modeling, where it is known as a workflow net. 
\begin{definition}
  \label{Chainable-Petri-Net}
  A \textbf{chainable Petri net}, $(S^\oplus, T, i, f, start, end)$ is a Petri net with the following additional features: 
  \begin{itemize}
  \item A set drawn from $S, \{i_1, i_2, ... i_n\} \in S,$ called the initial places. This is the starting point of the net.
  \item A set drawn from $S, \{f_1, f_2, ... f_n\} \in S,$ called the final places. This marks the completion of the net.
  \item A set drawn from $T, \{start_1, start_2... start_n\} \in T,$ called the starting transitions of the net. If the initial marking is $(s_1 \oplus s_2 ... \oplus s_n)$, then $\mathsf{src}\{start\} = \{i\},$ and $\mathsf{tar}\{start\} = (s_1 \oplus s_2 ... \oplus s_n)$, with elements not duplicated: $s_j \neq s_k$ when $j \neq k$. %\todoHE{I see what you are doing here, but when you define new morphisms you have to do it by modifying $\mathsf{src}$ and $\mathsf{tar}$}
  \item A set drawn from $T, \{end\} \in T,$ called the end transitions of the net. If the final marking is $(s_1 \oplus s_2 ... \oplus s_n)$, $\mathsf{src}(end) = (s_1 \oplus s_2 ... \oplus s_n)$, and $\mathsf{tar}(end) = f$. 
   \item Morphisms for chainable nets must preserve both $start$ and $end$, and their associated sets of places $i$ and $f$. So, a morphism $<a,b>: (N, start, end) \to (N', start', end')$ is an ordinary net morphism that preserves the markings $b(start) = start'$ and $b(end) = end'$.\todoBA{does the preservation of i and f need to be explicit or is it implied already? And, do the morphisms make sense now that these things are sets instead of individual things?} 
 \end{itemize}
\end{definition}
Making Petri nets chainable in this way ensures that\todoBA{did we make monads here?} the internal structure of component Petri nets remains untouched. For example, if we have two Petri nets and we want to join them together in sequence, we want to make sure that the first net starts and finishes, and then the next net starts and finishes. We do not want the nets to make progress concurrently, or for the second one to go first. Since we have distinguished the start and end of each component, we can define the sequential connective so that it starts with the start of the first, and finishes with the end of the second. Then, we simply join the end of the first with the beginning of the second, and we have the behavior we want. There is no need to concern ourselves with what goes on inside each component because the flow relation specific to that component will govern progress through it, and the component places and transitions are not disturbed by joining with another net since the join happens only at the start and/or end. Thus, by distinguishing the start and end of each component, we can more easily and reliably define the behavior of the nets when they are joined by some connective. The chainable petri net, or CNET, tracks both its initial and its final places to facilitate chaining the Petri net together with other Petri nets at either end. This enables the use of operators such as OR, SEQ, \& AND.\\
\begin{example}
  \label{ex:SEQ-PN}
First let us look at a simple operation, the sequential ordering (SEQ) of two Petri nets. This is a common operation that requires one task to be completed before another. This means that the operation cannot be commutative, since the order matters. In a simple Petri net, this is modeled graphically as two (or more) places arranged along a non-branching line. Clearly in such an arrangement the first place must be activated in order to activate the second place, and so on. Only when the last node is activated has the SEQ operation completed.    
\end{example}
\begin{definition}
  \label{def:SEQ-PN}
   Given two CNETs $N_1 = (S_1^\oplus, T_1, i_1, f_1, start_1, end_1)$ and $N_2 = (S_2^\oplus, T_2,  i_2, f_2, start_2, end_2)$, the \textbf{sequentitial composition} is  $N_1 ; N_2$, where: 
\begin{itemize} 
\item $S = S_1 + S_2$.
\item $T = T_1 + T_2 + \{(f_1 \rightarrow i_2)\}$.
\item $i = i_1$.
\item $f=f_2$.
\item $start = start_1$.
\item $end = end_2$.
\end{itemize} 
Order is key here. Making the first net's $start$ and $i$ the composition's $start$ and $i$ ensures that the composition begins with the net that is first in the sequence. Similarly, making the second net's $end$ and $f$ the composition's $end$ and $f$ ensures that the composition finishes upon the completion of the second in the sequence. Finally, the new transition between $f_1$ (marking the end of the first net) and $i_2$ (marking the beginning of the second net) provides the necessary connection between the two. 
In order to be sequential, this operation must be associative but not symmetric, so now let us check those properties. 
\end{definition}
\begin {lemma}
 \label{lemma:SEQ-NOT-SYMM}
 The SEQ operation for two CNETs, $A;B$, is not symmetric. 
\end{lemma}
\begin{proof}
Let $A = (S_A^\oplus, T_A, i_A, f_A, start_A, end_A)$ and $B = (S_B^\oplus, T_B, i_B, f_B, start_B, end_B)$. Symmetry would imply that $A;B = B;A$. Let us compute the components of each to test for symmetry. \\
The components of $A;B$ are: 
\begin{itemize}
 \item $S_{A;B} = S_A + S_B$.
 \item $T_{A;B} = T_A + T_B + \{(f_A \to i_B)\}$.
 \item $i_{A;B} = i_A$.
 \item $f_{A;B} = f_B$.
 \item $start_{A;B} = start_A$.
 \item $end_{A;B} = end_B$.
\end{itemize}
The components of $B;A$ are: 
\begin{itemize}
 \item $S_{B;A} = S_B + S_A$.
 \item $T_{B;A} = T_B + T_A + \{(f_B \to i_A)\}$.
 \item $i_{B;A} = i_B$.
 \item $f_{B;A} = f_A$.
 \item $start_{B;A} = start_B$.
 \item $end_{B;A} = end_A$.
\end{itemize}
Relying on the symmetry of disjoint union, we see that these two compositions have identical places, $S_A + S_B$ = $S_B + S_A$. However, whereas the construction of $A;B$ includes $\{(f_A \to i_B)\} \in T_{A;B}$, the construction of $B;A$ includes $\{(f_B \to i_A)\} \in T_{B;A}.$ Furthermore, the start and end transitions and initial and final places are not the same. Thus, $A;B \neq B;A$ and the operation is not symmetric.
\end{proof}
\begin{lemma}
\label{lemma:SEQ-ASSOC}
The SEQ operation for CNETs, $A;B;C$, is associative.
\end{lemma}
\begin{proof}
Let $A = (S_A^\oplus, T_A, i_A, f_A, start_A, end_A)$, $B = (S_B^\oplus, T_B, i_B, f_B, start_B, end_B)$, and $B = (S_C^\oplus, T_C, i_C, f_C, start_C, end_C)$. Composing the three, $A;B;C$, can be done one of two ways: $(A;B);C$ or $ A;(B;C)$. For the operation to be associative, the following must be true: $(A;B);C = A;(B;C).$ Let us compute each to test for equality.\\
First, we compute $(A;B);C$ by taking $A;B$:
\begin{itemize}
 \item $S_{A;B} = S_A + S_B.$
 \item $T_{A;B} = T_A + T_B + \{(f_A \to i_B)\}$.
 \item $i_{A;B} = i_A$.
 \item $f_{A;B} = f_B$.
 \item $start_{A;B} = start_A.$
 \item $end_{A;B} = end_B. $
\end{itemize} 
Now we add C:
\begin{itemize}
 \item $S_{(A;B);C} = S_A + S_B + S_C.$
 \item $T_{(A;B);C} = T_A + T_B + \{(f_A \to i_B)\} + \{(f_B \to i_C)\}.$ 
 \item $i_{(A;B);C} = i_A$.
 \item $f_{(A;B);C} = f_C$.
 \item $start_{(A;B);C} = start_A.$
 \item $end_{(A;B);C} = end_C. $
\end{itemize}
Now let us follow the second path, computing $A;(B;C)$ by first taking $B;C$:
\begin{itemize}
 \item $S_{B;C} = S_B + S_C.$
 \item $T_{B;C} = T_B + T_C + \{(f_B \to i_C)\}.$
 \item $i_{B;C} = i_B$.
 \item $f_{B;C} = f_C$
 \item $start_{B;C} = start_B.$
 \item $end_{B;C} = end_C.$ 
\end{itemize} 
Now we add A:
\begin{itemize}
 \item $S_{A;(B;C)} = S_A + S_B + S_C.$
 \item $T_{A;(B;C)} = T_A + T_B + \{(f_A \to i_B)\} + \{(f_B \to i_C)\}.$
 \item $i_{A;(B;C)} = i_A$.
 \item $f_{A;(B;C)} = f_C$
 \item $start_{A;(B;C)} = start_A.$
 \item$ end_{A;(B;C)} = end_C. $
\end{itemize}  
These clearly give the same result, showing that $(A;B);C = A;(B;C).$ \\
In sequential composition, the first CNET's starting transition $start_A$ and initial place $i_A$ always becomes the composition's start and initial place. Then, the final place of a preceding net is joined to the initial place of the subsequent net by adding to $T$ for the composition. The final transition, $end$, of the last net in the sequence becomes the $end$ of the composition, as does the final place, $f_C$. Thus, the operation is associative for any number of nets.
\end{proof}
\begin{lemma}
\label{lemma:SEQ:REP}
The SEQ operator for CNETs takes repetition into account. That is, $A;A \neq A$.
\end{lemma}
\begin{proof}
Let $A = (S_A^\oplus, T_A, i_A, f_A, start_A, end_A)$. 
Following the definition of sequential composition, we see that the elements of the two CNETs are joined by disjoint union. In this operation, members of each set are paired with a label to indicate their origin set. Since the origin nets have the same name, we will use $x\in \{1,2\}$to make them distinct. 
Now let us compute $A;A$.
\begin{itemize}
\item $S_{A;A} = S_A + S_A = (S_A \times \{1\}) \cup (S_A \times \{2\}).$
\item $T_{A;A} = T_{A_1} + T_{A_2} + (f_{A_1} \to i_{A_2}\}$.\todoBA{the T needs to respect which A it came from - does this just happen by definition?}
\item $i_{A;A} = i_{A_1}.$
\item $f_{A;A} = f_{A_1}.$
\item $start_{A;A} = start_{A_1}.$
\item $end_{A;A} = end_{A_2}. $
\end{itemize} 
Each occurence of A is marked such that it is distinct from other occurences of A, and $A;A$ also contains the transition $(f_{A_1} \to i_{A_2})$, which is not in $A$.
Thus, $A;A \neq A$.
\end{proof}   
\begin{example}
  \label{ex:OR-PN}
Next let us examine disjunction (OR) in CNETs, starting with a basic example. Consider an ordinary Petri net $(S^\oplus, T)$. A simple model of the disjunction $s_2$ OR $s_3$ is given by the following relations:
  \begin{itemize}
  \item Let $S = \{s_1, s_2, s_3\}$, and $T = \{(s_1 \to s_3), (s_2 \to s_3)\}$. 
  \item Given this relation, as long as $s_1, s_2,$ or both are activated, $s_3$ will be activated. 
  \item If neither $s_1$ nor $s_2$ are activated, $s_3$ will also remain inactive.  
  \end{itemize}
Within a single Petri net, we can see that disjunction is modeled
graphically by two transition arcs leading to one place. If either 
transition fires, the place will be activated, enabling its subsequent
transition(s) to fire. The disjunction of two CNETs will result in a
similar pattern: if at least one of the CNET disjuncts reaches its
final marking, then the disjunction itself will reach its final
marking.
\end{example}

\begin{definition}
  \label{def:OR-PN}
  Given two CNETs, $N_1= (S_1^\oplus, T_1, i_1, f_1, start_1, end_1)$ and $N_2= (S_2^\oplus, T_2, i_2, f_2, start_2, end_2)$, their \textbf{disjunction} is $N_1 + N_2$, where:  
  \begin{itemize}
  \item The set of initial places $i_{1+2} = i_1 \times i_2$.
  \item The set of final places $f_{1+2} = f_1 + f_2$.
  \item The start transition $start_{1+2} = start_1 \times start_2$.
  \item The end transition $end_{1+2} = end_1 + end_2$\todoBA{does this make sense?} 
  \item S = $S_1 + S_2 + i_{1+2} + f_{1+2}$ \todoBA{is f1+2 really necessary here? already in S1 + S2}
  \item T = $T_1 + T_2$.
  \item $[\mathsf{src_1}, \mathsf{src_2}], [\mathsf{tar_1}, \mathsf{tar_2}]: T\to S^\oplus$. \todoBA{don't think we need this in short notation, ASK}
  \end{itemize}  
  The pair of the initial places of the disjuncts is the initial place of the new net, and likewise the starting transition is the pair of the disjuncts' starting transitions. This way, each branch of the disjunction
  can be reached initially. The final place is a new place that is the
  target of the transition from each disjunct, so that the completion of
  either branch (or both) can trigger the disjunction's final place. The
  disjunction's places gather these elements together, along with the
  places of each branch. Finally, the transitions appropriate
  to each branch are used to compute runs, with the addition of the new
  transitions for f.
\end{definition}

\begin{lemma}
  \label{lemma:OR-coproduct}
  The disjunction of two CNETs, $A + B$, is a coproduct. 
\end{lemma}
\begin {proof}
%%%fix inj functions
$N_1 + N_2$ is a coproduct if it has morphisms $i_1: A \to A + B$ and $i_2: B \to A + B$ such that for any object C with morphisms $f: A\to C$ and $g: B\to C$, there is a unique morphism $h: A + B \to C$ such that $f = i_1;h$ and $g = i_2; h$, meaning that this diagram commutes:\\
\begin{center}
  \begin{math}
    \bfig
    \Atrianglepair|mmmaa|/<-`<-`<-`->`<-/<1000,500>[
      C`
      A`
      A+B`
      B;
      f`
      h`
      g`
      i_1`
      i_2]
    \efig
  \end{math}
\end{center}
\todoBA{See definition 8; do I need to explain why we are using long notation for this when we've been doing short notation for CNETS up to this point?}
Let $A = (P_A, T_A, \mathsf{src_A}, \mathsf{tar_A}, i_A, f_A)$ and $B = (P_B, T_B, \mathsf{src_B}, \mathsf{tar_B}, i_B, f_B)$, and take A + B.\\
Let us define $i_0$ and $i_1$, which are injections for Petri nets. We will take it by parts for clarity.\\
$P_{A+B} = (P_A +P_B+\{(i_A, i_B)\} +\{f_A\} + \{f_B\})$\\
The coproduct of sets of places has the injective functions already, which covers all the constituents except the initial places. For the initial places, $i_A \to i_A \times i_B$ and $i_B \to i_A \times i_B$ just maps the individual initial place to the pair of initial places, using the position in the pair to indicate whether it is $i_A$ or $i_B$.\\
$T_{A+B} = T_A + T_B$, so again we can use the coproduct of sets to obtain the injective functions for this part of the net.\\ 
$[\mathsf{src_1}, \mathsf{src_2}], [\mathsf{tar_1}, \mathsf{tar_2}]: T\to P^\oplus$. These functions already respect set membership, and so their injective function is also clear. Since these composite pieces are all coproducts, we can rely on their injections to yield the injections of the larger structure.\smallskip\\ 
Now, suppose we have another CNET C and morphisms $f: A\to C$ and $g: B\to C$; we define $h$ as follows:\\
  \begin{equation}
    h(x)=
    \begin{cases}
      f(x), & \text{if x is from A}\\
      g(x), & \text{if x is from B}
    \end{cases}
  \end{equation}
Given this definition of $h$, it is clear that $f = i_1;h$ and $g = i_2;h$, since h(x) applies f(x) if $x \in A$ and g(x) if $x \in B$.\\
To show that this satisfies the uniqueness requirement, let us consider an arbitrary function $k : (A+B) \to C$, where $i_1;k = f$ and $i_2;k = g$. For $a\in A$ and $b\in B$, the following equalities hold:\\ 
\begin{equation}
i_1(a);k(a) = f(a) = h(a) 
\end {equation}
\begin{equation}
i_2(b);k(b) = g(b) = h(b)
\end{equation}
Thus, $h = k$, showing that $h$ is unique. 
This provides a morphism as required, showing that the CNET disjunction is a coproduct.  
\bigskip\\
\end{proof}
\begin{definition}
  \label{def:SYNC-AND-PN}
   Given two CNETs, $N_1= (P_1, T_1, \mathsf{src_1}, \mathsf{tar_1}, i_1, f_1)$ and $N_2= (P_2, T_2, \mathsf{src_2}, \mathsf{tar_2}, i_2, f_2)$, their \textbf{synchronous conjunction} is $N_1 \talloblong N_2$, where: 
\begin{itemize}
\item The initial place $i = i_1 \times i_2$.
\item The final place $f = f_1 \times f_2$.
\item The beginning transition $start = start_1 \times start_2$. 
\item The ending transition $end = end_1 \times end_2$.
\item P = $P_1 \times P_2$.
\item T = $T_1 \times T_2$.
\item $[\mathsf{src_1}, \mathsf{src_2}], [\mathsf{tar_1}, \mathsf{tar_2}]: T\to P^\oplus$. \todoBA{Do I need this part?}
\end{itemize}
The initial place of synchronous conjunction is the pair of initial places from the two branches. This ensures that each branch will be reached initially. The conjunction's places are formed by pairing the places of the two branches. The transitions are likewise paired, effecting the synchronization necessary for this operation. Finally, the $end$ transition has the pair of final places from each branch as its source, requiring that both complete in order to activate the transition to the final place of the conjunction, which is the target of $end$. 
\end{definition}
\todoBA{Probably should prove that this is synchronous. How can I do that?}
\begin{lemma}
\label{lemma:SYNC-AND-PRODUCT}
The synchronous conjunction of two CNETs, $A \talloblong B$, is a product.
\end{lemma}
\begin{proof}
$N_1 \talloblong N_2$ is a product if it has morphisms $i_1: A \times B \to A$ and $i_2: A \times B \to B$ such that for any object C with morphisms $f: C\to A$ and $g: C\to B$, there is a unique morphism $h: C \to A \times B$ such that $f =h; i_1$ and $g = h;i_2$, meaning that this diagram commutes:\\
\begin{center}
  \begin{math}
    \bfig
    \Atrianglepair|mmmaa|/->`->`->`<-`->/<1000,500>[
      C`
      A`
      A\times B`
      B;
      f`
      h`
      g`
      i_1`
      i_2]
    \efig
  \end{math}
\end{center}
Let $A = (P_A, T_A, \mathsf{src_A}, \mathsf{tar_A}, i_A, f_A)$ and $B = (P_B, T_B, \mathsf{src_B}, \mathsf{tar_B}, i_B, f_B)$, and take $A \talloblong B$.\\
Let us define $i_1$ and $i_2$, which are projections for Petri nets. We will take it by parts for clarity.\\
$P_{A \talloblong B} = (P_1 \times P_2) + i + f$. The product of the sets of places, $(P_1 \times P_2)$, has the projections already, so we need only examine projections for $i$ and $f$. $i =  (i_A \times i_B)$ and $f =  (f_A \times f_B)$, so both of these already have the projections as well.
T = $(T_1 \times T_2) + start + end$. The product of the sets of transitions has projections already, so we can focus on $start$ and $end$. Similarly, because these are the products of the start of A and B and the end of A and B, they also have the necessary projections. Thus, the synchronous conjunction is a product.
\end{proof} 
\begin{example}
  \label{ex:STEP-AND-PN}
Next let us examine another type of AND in CNETs, Stepwise AND. We will construct this formally using a combination of SEQ and OR.
\end{example}
\begin{definition}
  \label{def:STEP-AND-PN}
  Given two CNETs, $N_1= (P_1, T_1, \mathsf{src_1}, \mathsf{tar_1}, i_1, f_1)$ and $N_2= (P_2, T_2, \mathsf{src_2}, \mathsf{tar_2}, i_2, f_2)$, their \textbf{stepwise conjunction} is $N_1 \wedge N_2$ = $(N_1 ; N_2) + (N_2 ; N_1)$. \\
Let us take it by parts for clarity, starting with the first disjunct:
\begin{itemize}
 \item $P_{N_1;N_2} = P_1 + P_2.$
 \item $T_{N_1;N_2} = T_1 + T_2 + \{(f_1 \to i_2)\}$.
 \item $i_{N_1;N_2} = i_1$.
 \item $f_{N_1;N_2} = f_2$.
 \item $start_{N_1;N_2} = start_1.$
 \item $end_{N_1;N_2} = end_2. $
\end{itemize} 
Now let us move on to the second disjunct:
\begin{itemize}
 \item $P_{N_2;N_1} = P_1 + P_2.$
 \item $T_{N_2;N_1} = T_1 + T_2 + \{(f_2 \to i_1)\}$.
 \item $i_{N_2;N_1} = i_2$.
 \item $f_{N_2;N_1} = f_1$.
 \item $start_{N_2;N_1} = start_2.$
 \item $end_{N_2;N_1} = end_1. $
\end{itemize} 
Now we can compute the disjunction of these sequences, (with duplication omitted):
\begin{itemize}
 \item $P_{N_1;N_2 + N_2;N_1} = P_1 + P_2.$
 \item $T_{N_1;N_2 + N_2;N_1} = T_1 + T_2 + \{(f_1 \to i_2)\} + \{(f_2 \to i_1)\}$.
 \item $i_{N_1;N_2 + N_2;N_1} = i_1 \times i_2$.
 \item $f_{N_1;N_2 + N_2;N_1} = f_2 + f_1$.
 \item $start_{N_1;N_2 + N_2;N_1} = start_1 \times start_2.$
 \item $end_{N_1;N_2 + N_2;N_1} = end_2 + end_1. $
\end{itemize} 
The development of this connective using SEQ and OR means that both must complete, in either order, to activate the next transition. However, this connective does not allow for partial progress on one, and then partial progress on the other. This feature, called interleaving, is accomplished with the next connective.
\end{definition}

\begin{example}
  \label{ex:SIMP-AND-PN}
Consider an ordinary Petri net $(S^\oplus, T)$. A simple model of the conjunction $s_1$ AND $s_2$ is given by the following relations:
  \begin{itemize}
  \item Let $S = \{s_1, s_2, s_3\}$, and $T = \{((s_1, s_2) \to s_3)\}$. 
  \item Given this relation, $s_1$ and $s_2$ must both be activated for $s_3$ to be activated. 
  \item If either $s_1$ or $s_2$ remain inactive, $s_3$ will also remain inactive.  
  \end{itemize}
Within a single Petri net, we can see that conjunction is modeled graphically by two places feeding into one transition. Both places must be occupied for the transition to fire. Accomplishing the conjunction of more complex processes has long been a subject of debate, with the two main approaches being true concurrency and interleaving. The initial and final places that define the CNET help to resolve this difficulty. By pairing the initial places of each conjunct, we ensure that each thread in the conjunction begins to fire. Then, by taking the disjoint union of the transitions and places of each conjunct, we allow the two threads to complete in any order (while still following the flow relation of each thread). The threads could even make partial progress, first part of one and then part of the other. We verify that each thread has completed (fulfilling the necessary condition for conjunction) by pairing the final places in the conjunction.This construction allows the two conjuncts to remain independent of each other during their execution, with the initial and final places creating the conjunction. 
\end{example}
\begin{definition}
  \label{def:SIMP-AND-PN}
  Given two CNETs, $N_1= (P_1, T_1, \mathsf{src_1}, \mathsf{tar_1}, i_1, f_1)$ and $N_2= (P_2, T_2, \mathsf{src_2}, \mathsf{tar_2}, i_2, f_2)$, their \textbf{simple conjunction} is $N_1 \amalg N_2$ where: \\
\begin{itemize}
\item $P= P_1 + P_2$
\item $T = T_1 + T_2$
\item $start = start_1 + start_2$
\item $end = end_1 + end_2$
\item $i = i_1 \times i_2$
\item$f = f_1 \times f_2$
\end{itemize}
\end{definition}
\begin{lemma}
\label{lemma:REAL-AND-TENSOR-PRODUCT}
The simple conjunction of two CNETs, $A \amalg B$, is a tensor product.
\end{lemma}
\begin{proof}
To be a tensor product, simple conjunction must be both commutative and associative. First, let us check commutativity.
Let $A = (P_A, T_A, \mathsf{src_A}, \mathsf{tar_A}, i_A, f_A)$ and $B = (P_B, T_B, \mathsf{src_B}, \mathsf{tar_B}, i_B, f_B)$, and take $A \amalg B$.\\ 
\begin{itemize}
\item $P_{A \amalg B}= P_A + P_B$
\item $T_{A \amalg B} = T_A + T_B$
\item $start_{A \amalg B} = start_A + start_B$
\item $end_{A \amalg B} = end_A + end_B$
\item $i_{A \amalg B} = i_A \times i_B$
\item$f_{A \amalg B} = f_A \times f_B$
\end{itemize}
Now, let us compare this to ${B \amalg A}$.
\begin{itemize}
\item $P_{B \amalg A}= P_B + P_A$
\item $T_{B \amalg A} = T_B + T_A$
\item $start_{B \amalg A} = start_B + start_A$
\item $end_{B \amalg A} = end_B + end_A$
\item $i_{B \amalg A} = i_B \times i_A$
\item$f_{B \amalg A} = f_B \times f_A$
\end{itemize}
The places, transitions, and start/end are all equivalent by virtue of the commutativity of disjoint union. While the paired initial places are reversed, in this context the reversed pairs are equivalent because either way the places are joined together, ensuring that they will both be activated once the conjunction is activated. Similarly, the paired final places are joined together to ensure that the conjunction does not complete until both branches complete. Thus, the simple conjunction is commutative.
Now let us check for associativity. In addition to A and B above, let there be a third CNET C. Let $C = (P_C, T_C, \mathsf{src_C}, \mathsf{tar_C}, i_C, f_C)$ and take $(A \amalg B)\amalg C$.
\begin{itemize}
\item $P_{(A \amalg B)\amalg C}= (P_A + P_B) + P_C$
\item $T_{(A \amalg B)\amalg C} = (T_A + T_B)+ T_C$
\item $start_{(A \amalg B)\amalg C} = (start_A + start_B) + start_C$
\item $end_{(A \amalg B)\amalg C} = (end_A + end_B) + end_B$
\item $i_{(A \amalg B)\amalg C} = (i_A \times i_B)\times i_C$
\item$f_{(A \amalg B)\amalg C} = (f_A \times f_B)\times f_C$
\end{itemize}
Now let us take $A \amalg (B\amalg C)$.
\begin{itemize}
\item $P_{A \amalg (B\amalg C)}= P_A + (P_B + P_C)$
\item $T_{A \amalg (B\amalg C)} = T_A + (T_B+ T_C)$
\item $start_{A \amalg (B\amalg C)} = start_A + (start_B + start_C)$
\item $end_{A \amalg (B\amalg C)} = end_A + (end_B + end_B)$
\item $i_{A \amalg (B\amalg C)} = i_A \times (i_B\times i_C)$
\item$f_{A \amalg (B\amalg C)} = f_A \times (f_B\times f_C)$\todoBA{Check consistency; start and end are not paired, but initial and final are - is that right?}
\end{itemize}
Again, the places, transitions, and start/end are all equivalent by virtue of the associativity of disjoint union. The paired initial and final places are isomorphic to one another, as the next proof shows.
\end{proof}
\begin{lemma}
\label{PRODUCT-IS-ASSOCIATIVE}
 $((A \times B)\times C) \cong (A \times (B\times C))$
\end{lemma}
\begin{proof}
To show this, we must define two homomorphisms between them, which we will call $f$ and $g$. 
The function $f$ is defined as follows: Taking the second projection of $(A \times B)\times C)$ yields $C$. Taking the first projection of $(A \times B)\times C)$ yields $(A \times B)$. Taking the first projection again yields $A$. Taking the second projection yields $B$. Then, we can rejoin the elements, first taking $B \times C$ and then $(A \times (B\times C)).$ Thus, 
\begin{center}
  \begin{math}
    \begin{array}{lll}
      f((A \times B)\times C) & = & (A \times (B\times C))\\
    \end{array}
  \end{math}
\end{center}
Now let us define $g$. Taking the first projection of $(A \times (B\times C))$ yields $A$. Taking the second projection of $(A \times (B\times C))$ yields $(B\times C)$. Taking the first projection of $(B\times C)$ yields $B$. Taking the second projection yields $C$. Then, we can rejoin the elements, first taking $A \times B$ and then $((A \times B)\times C).$ Thus, 
\begin{center}
  \begin{math}
    \begin{array}{lll}
      g(A \times (B\times C)) & = & ((A \times B)\times C)\\
    \end{array}
  \end{math}
\end{center}
Finally, let us check that $g;f = Id$ and $f;g=Id$.\\ 
\begin{center}
  \begin{math}
    \begin{array}{lll}
      f(g(A \times (B\times C))) & = & f((A \times B)\times C)\\
                                                 & = & (A \times (B\times C))\\
    \end{array}
  \end{math}
\end{center}
Thus, $g;f = Id$. Likewise,\\
\begin{center}
  \begin{math}
    \begin{array}{lll}
      g(f((A \times B)\times C)) & = & g(A \times (B\times C))\\
                                                 & = & ((A \times B)\times C)\\
    \end{array}
  \end{math}
\end{center}
Thus, $f;g = Id$, and $((A \times B)\times C) \cong (A \times (B\times C))$
\end{proof}

%\newpage
%Example nets:
%%
%K = \\
%$S_K :\{ a, b, c\}$\\
%$T_K :\{t\}$\\  
%$F_K (a, t) = 2$\\
%$F_K (b, t) = 1$\\
%$F_K (t, c) = 2$\\
%$F_K (else) = 0$\\
%%
%$S_K^\oplus :\{ 2a \oplus 1b \oplus 2c\}$\\
%$t = \{ 2a \oplus 1b \to 2c \}$\\  
%$\delta_{0K} (t) = 2a \oplus 1b \}$\\
%$\delta_{1K} (t) = 2c \}$\\
%\smallskip
%M = \\
%$S_M :\{d,e\}$\\
%$T_M :\{t'\}$\\  
%$F_M (d, t') = 2$\\
%$F_M (t', e) = 1$\\
%$F_M (else) = 0$\\
%%
%$S_M^\oplus :\{ 2d \oplus 1e\}$\\
%$t = \{ 2d \to 1e \}$\\  
%$\delta_{0M} (t') = 2d \}$\\
%$\delta_{1M} (t') = 1e \}$\\
%\smallskip
%$S_K^\oplus \times S_M^\oplus = (2a \oplus 1b, 2d) \to (2c, 1e)$\\
%\smallskip
%$(S_K + S_M)^\oplus = (\{1\} \times S_K) \cup (\{2\} \times S_M)^\oplus$\\
%$((1, 2a), (1, 1b), (2, 2d))^\oplus = $\\
%$S_{KM}^\oplus: \{(1, 2a), (1, 1b), (2, 2d) \}$\\
%$T_{KM}: \{t_1, t_2\}$\\
%$t_1 = ((1, 2a) \oplus (1, 1b)) \to (1, 2c)$\\
%$t_2 = (2, 2d) \to (2, 1e)$\\
%$\delta_{0KM} (t_1) = (1, 2a) \oplus (1, 1b) \}$\\
%$\delta_{0KM} (t_2) = (2, 2d) \}$\\
%$\delta_{1KM} (t_1) = (1, 2c) \}$\\
%$\delta_{1KM} (t_2) = (2, 1e) \}$\\
%\smallskip
%$(S_1 ^\oplus \times S_2 ^\oplus)$ and $(S_1 + S_2)^\oplus$ are isomorphic. \\
%Suppose there are two Petri nets $S_1 and S_2$, with sets of places $M_1 and M_2$ and sets of arcs $T_1 and T_2.$\\
%Let F be the homomorphism from $(S_1 + S_2)^\oplus$ to $(S_1 ^\oplus \times S_2 ^\oplus)$. \\
%$F((S_1 + S_2)^\oplus) = (S_1 ^\oplus + S_2 ^\oplus)$\\
%where $S_1 + S_2 = (\{1\} \times S_1) \cup (\{2\} \times S_2)$\\
%For F:\\
%Calculating the set of places of the codomain:\\
%  $S_1 =  \bigcup_{ y \in domain (x, y)} | x=1)$\\
%  $S_2 =  \bigcup_{y \in domain (x, y)} | x=2)$\\
%Note: I mean to separate out the two sets using the disjoint markers here.\\
%The set of places of the codomain = $(S_1 ^\oplus \times S_2 ^\oplus)$\\
%The arrows of the codomain maintain the structure defined in the domain, disregarding the origin markers \{1\} and \{2\} added in by taking the disjoint union.\\
%Since the function preserves the structure between the objects, only changing the names of the objects, this is a homomorphism.\\
%Now, let G be the homomorphism from $(S_1 ^\oplus \times S_2 ^\oplus)$ to $(S_1 + S_2)^\oplus$. \\
%The objects or places of the codomain are the objects of the domain modified in the following way:\\
%where objects in the domain have the form $(x, y), (\{1\} \times x) \cup (\{2\} \times y).$\\
%The arrows of the codomain maintain the structure of the domain, adding in origin markers \{1\} and \{2\} by position as described above.\\
%Since G preserves the group's structure and only modifies objects' names, it is a homomorphism. 
%Clearly,$ G \circ F = F \circ G,$ since F removes the origin markings  \{1\} and \{2\} and G puts them back. Structure remains unchanged in either direction.\\
%\newpage
%
%% subsection MeseguerMontanari (end)



